# YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license

# Parameters
nc: 80  # number of classes ç›®æ ‡ç±»åˆ«æ•°
depth_multiple: 0.33  # model depth multiple    æ¨¡å‹æ·±åº¦å€æ•°: æ·±åº¦=å±‚æ•°, æœ€ç»ˆä½¿ç”¨,æ˜¯å°†å®ƒä¸numberï¼ˆ3, 6...ï¼‰ç›¸ä¹˜
width_multiple: 0.50  # layer channel multiple  é€šé“å€æ•°: åœ¨åˆ›å»ºå·ç§¯å±‚Convçš„æ—¶å€™, 64è¡¨ç¤ºè¿™ä¸€å±‚è¾“å‡ºçš„ç‰¹å¾é€šé“æ•°, ä½†å¹¶ä¸è¡¨ç¤ºYOLOv5såœ¨è¿™ä¸€å±‚è¾“å‡ºäº†64ä¸ªé€šé“æ•°,è€Œæ˜¯64*width_multiple, ä¹Ÿå°±æ˜¯å…¶å®è¾“å‡ºäº†32ä¸ªé€šé“æ•°
# ä¸€å±‚è¾“å‡ºçš„é€šé“æ•°è¶Šå¤š, åˆ™è¡¨ç¤ºå®ƒè¶Šå®½.
# å±‚æ•°è¶Šå¤š,å®½åº¦è¶Šå®½, å¯¹åº”çš„å‚æ•°é‡è¶Šå¤§,æ¨¡å‹è¶Šå¤æ‚, ä¸€èˆ¬æ¥è¯´,å‡†ç¡®ç‡å°±è¶Šé«˜.
# å¯¹æ¯”yolov5l.yamlã€yolov5m.yamlã€yolov5n.yamlã€yolov5sã€yolov5x.yaml ä»–ä»¬ä¹‹é—´ä¹Ÿå°±è¿™å„¿çš„åŒºåˆ«.

# æå‰é¢„å®šä¹‰å¥½çš„çŸ©å½¢æ¡†, åˆ©ç”¨çŸ©å½¢æ¡†å®ç°æœ€ç»ˆæ£€æµ‹.
anchors:
  - [10,13, 16,30, 33,23]  # P3/8         ç¬¬ä¸€å±‚ç‰¹å¾ä¸Š,å®šä¹‰äº†3ä¸ªanchors, åˆ†åˆ«æ˜¯[10x13], [16x30], [33x23]; æ¯”è¾ƒå°,ä¹Ÿæ˜¯å› ä¸ºç¬¬ä¸€å±‚ç‰¹å¾é€šå¸¸æ˜¯é¢„æµ‹å°ç›®æ ‡;
  - [30,61, 62,45, 59,119]  # P4/16
  - [116,90, 156,198, 373,326]  # P5/32

# YOLOv5 v6.0 backbone
backbone:
  # [from, number, module, args]
#  from:-1. è¡¨ç¤ºæ˜¯ä»ä¸Šä¸€å±‚è¿‡æ¥çš„
#  number:1. è¯¥å±‚æ¨¡å—çš„æ•°é‡
#  module: è¯¥å±‚çš„å±‚ç»“æ„; Conv:å·ç§¯å±‚
#  args: å‚æ•°
  [[-1, 1, Conv, [64, 6, 2, 2]],  # 0-P1/2  (Pyramid:é‡‘å­—å¡”)P1:ç¬¬ä¸€å±‚; /2: 640x640->æ­¥é•¿2->320x320,ç¼©å°äº†ä¸€å€,æ‰€ä»¥æ˜¯/2;
   [-1, 1, Conv, [128, 3, 2]],  # 1-P2/4                   P2:ç¬¬äºŒå±‚; åˆç¼©å°ä¸€å€,æ‰€ä»¥æ˜¯é™¤ä»¥4;
   [-1, 3, C3, [128]],
   [-1, 1, Conv, [256, 3, 2]],  # 3-P3/8                  P3:åˆ°ç¬¬ä¸‰å±‚,åˆæ˜¯ä¸€ä¸ªæ­¥é•¿ä¸º2çš„å·ç§¯, å˜æˆåŸå›¾çš„1/8;
   [-1, 6, C3, [256]],
   [-1, 1, Conv, [512, 3, 2]],  # 5-P4/16                 ......
   [-1, 9, C3, [512]],
   [-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32                ......
   [-1, 3, C3, [1024]],
   [-1, 1, SPPF, [1024, 5]],  # 9 ç¬¬9å±‚
  ]

# YOLOv5 v6.0 head
head:
  [[-1, 1, Conv, [512, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 6], 1, Concat, [1]],  # cat backbone P4; Concatåˆå¹¶æ‹¼æ¥:[-1,6]ä¸Šä¸€å±‚ç»™äº†ä¸€ä¸ªè¾“å…¥, ç¬¬6å±‚ä¹Ÿç»™äº†ä¸€ä¸ªè¾“å…¥
   [-1, 3, C3, [512, False]],  # 13

   [-1, 1, Conv, [256, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 4], 1, Concat, [1]],  # cat backbone P3
   [-1, 3, C3, [256, False]],  # 17 (P3/8-small) é¢„æµ‹å°ç›®æ ‡

   [-1, 1, Conv, [256, 3, 2]],
   [[-1, 14], 1, Concat, [1]],  # cat head P4
   [-1, 3, C3, [512, False]],  # 20 (P4/16-medium) é¢„æµ‹ä¸­ç›®æ ‡

   [-1, 1, Conv, [512, 3, 2]],
   [[-1, 10], 1, Concat, [1]],  # cat head P5
   [-1, 3, C3, [1024, False]],  # 23 (P5/32-large) é¢„æµ‹å¤§ç›®æ ‡ 32

   [[17, 20, 23], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)
  ]
